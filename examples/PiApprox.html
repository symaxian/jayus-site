<html>
	<head>
		<title>Approximating PI Demo</title>
		<script type='text/javascript' src='../../jayusLoader.js'></script>
		<script type='text/javascript'>

function init(){

	SIZE = 500;

	jayus.init({
		width:SIZE,
		height:SIZE,
		framerate:60,
		cursor:{
			suppressScrolling:false
		}
	});

	jayus.display.canvas.style.border = '1px solid black';

	screen = new jayus.Surface(SIZE,SIZE);
	jayus.director.add(screen);

	circle = new jayus.Circle(SIZE/2,SIZE/2,SIZE/2).style({stroke:'black',lineWidth:1});
	jayus.director.add(circle);

	pi = 0;

	dotsIn = 0;
	dotsOut = 0;

	setInterval(function(){
		dotsLabel.innerText = dotsIn+dotsOut;
		piLabel.innerText = pi;
		accuracy = 100*pi/Math.PI;
		if(accuracy > 100){
			accuracy = 100-(accuracy-100);
		}
		accuracyLabel.innerText = accuracy;
	},1000);

	point = new jayus.Point();

	jayus.addHandler('frame',function(){
		
		var i, x, y, color;
		
		for(i=0;i<100;i++){
		
			x = jayus.math.randomBetween(0,SIZE);
			y = jayus.math.randomBetween(0,SIZE);
	
			if(circle.intersectsAt(x,y)){
				dotsIn++;
				color = 'red';
			}
			else{
				dotsOut++;
				color = 'green';
			}
	
			pi = 4*(dotsIn/(dotsIn+dotsOut));
			
			point.setPos(x,y).style({fill:color}).drawOnto(screen);

		}

	});

	jayus.start();

}

		</script>
	</head>
	<body onload="init()">
		<center>
			<h2>Approximation of Pi using a Monte Carlo method</h2>
			<div id="jayus"></div>
			<p>
				Number of dots = <span id="dotsLabel"></span>
			</p>
			<p>
				Pi = <span id="piLabel"></span>
			</p>
			<p>
				Accuracy of Pi = <span id="accuracyLabel"></span> %
			</p>
		</center>
	</body>
</html>
